<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<!-- importamos el fichero de configuración para los servicios
	<import resource="spring/canjehoras-bl.xml"></import> -->

	<!-- Resolucion de la parte de vista por parte del DispatcherServlet -->
	<bean
		class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="prefix" value="/jsp/"></property>
		<property name="suffix" value=".jsp"></property>
		<property name="order" value="1" />
	</bean>
	
	<bean id="beanGetter" class="com.vcortes.canjehoras.utils.BeanGetter" />

	<!-- Tratamiento de excepciones -->
	<bean
		class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
		<property name="exceptionMappings">
			<props>
				<prop key="java.lang.Exception">error</prop>
			</props>
		</property>
	</bean>
	<!-- Fin de Tratamiento de excepciones -->
	
	<!-- Internacionalización de mensajes -->
	<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
		<property name="basenames">
			<list>
				<value>WEB-INF/locale/messages</value>
				<value>WEB-INF/config</value>
			</list>
		</property>
		<property name="defaultEncoding" value="UTF-8" />
	</bean>
	

	<!-- login -->
	<bean name="/login/*.html" class="com.vcortes.canjehoras.controller.LoginController">
        <property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="usuarioBL" ref="usuarioBL" />
		<property name="buscadorBL" ref="buscadorBL" />
		<property name="provinciaBL" ref="provinciaBL" />
		<property name="truequeBL" ref="truequeBL" />
		<property name="prefProvinciaBL" ref="prefProvinciaBL" />
		<property name="prefCategoriaBL" ref="prefCategoriaBL" />
    </bean> 
	
	<!-- Pagina de inicio -->
	<bean name="/inicio/*.html" class="com.vcortes.canjehoras.controller.InicioController">
        <property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="truequeBL" ref="truequeBL" />
    </bean> 

	<!-- Categoria -->
	<bean name="/buscador/*.html" class="com.vcortes.canjehoras.controller.BuscadorController">
        <property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="buscadorBL" ref="buscadorBL" />
		<property name="truequeBL" ref="truequeBL" />
		<property name="provinciaBL" ref="provinciaBL" />
    </bean> 
    
   <!-- Trueque-->
	<bean name="/trueque/*.html" class="com.vcortes.canjehoras.controller.TruequeController">
        <property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="usuarioBL" ref="usuarioBL" />
		<property name="buscadorBL" ref="buscadorBL" />
		<property name="truequeBL" ref="truequeBL" />
		<property name="prefProvinciaBL" ref="prefProvinciaBL" />
		<property name="prefCategoriaBL" ref="prefCategoriaBL" />
		<property name="agendaBL" ref="agendaBL" />
		<property name="canjeBL" ref="canjeBL" />
    </bean> 
	
   <!-- Agenda-->
	<bean name="/agenda/*.html" class="com.vcortes.canjehoras.controller.AgendaController">
		<property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="usuarioBL" ref="usuarioBL" />
		<property name="truequeBL" ref="truequeBL" />
		<property name="canjeBL" ref="canjeBL" />
    </bean> 

	<!-- Foro -->
	<bean name="/foro/*.html" class="com.vcortes.canjehoras.controller.ForoController">
        <property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="usuarioBL" ref="usuarioBL" />
		<property name="truequeBL" ref="truequeBL" />
    </bean> 
	
	<!-- Graficas -->
	<bean name="/graficas/*.html" class="com.vcortes.canjehoras.controller.GraficasController">
        <property name="methodNameResolver">
            <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver"/>
        </property>
		<property name="usuarioBL" ref="usuarioBL" />
		<property name="truequeBL" ref="truequeBL" />
    </bean> 
</beans>
